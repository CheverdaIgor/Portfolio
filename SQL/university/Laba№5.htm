<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>СУБД MS SQL</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<META content="MSHTML 5.50.4134.600" name=GENERATOR></HEAD>
<BODY style="background: lightgreen">
<CENTER>
<H3>Лабораторная работа 5</H3></CENTER>
<HR>

<CENTER>
<H3>  </H3>
<P>
</CENTER>

<P>
<DL>
  <DT><B>Цель работы:</B> использование хранимых процедур, триггеров и представлений для 
         обновления/изменения информации в базе данных. </DT>
<P>  <CENTER><DT><font size="4"><B>Порядок выполнения работы:</B> </font></P></CENTER>
 <OL>


<LI>Создать таблицу <B><I>SKLAD</I></B> в базе данных, которая будет хранить информацию об имеющихся
на складе изделиях. Таблица должна состоять из полей: 
<UL>
<LI><B><I>izdelie</I></B> - поле, содержащее код изделия, 
<LI><B><I>kol</I> </B>- поле, содержащее количество изделий на складе. 
</UL> 
<LI>Создать триггер на добавление новой записи в таблицу <B><I>SKLAD</I></B>: необходимо проверить, существует ли в таблице <B><I>STUFF</I></B> код соответствующего изделия, и если не существует, то добавляемая в таблицу <B><I>SKLAD</I></B> запись удаляется. (При написании триггера следует работать с таблицей INSERTED.) 


<LI>Создать процедуру для работы с изделиями, которая позволит добавлять/удалять/изменять
     информацию о производимых изделиях в базе. В качестве параметров процедуре передается
 название изделия и название материала для изделия.
 
<LI>Создать триггер, который позволяет обрабатывать возврат изделий:
когда производится удаление записи из таблицы <B><I>SALES</I></B>, то соответственно
производится увеличение количества соответствующего товара на складе на возвращаемое количество.

 <LI>Создать представление, которое позволит получать информацию о количестве и общей стоимости
проданных изделий каждому из покупателей продукции.
 <LI>Создать процедуру, которая позволит фиксировать продажи: если на складе есть нужное 
количество товара, то делается запись о продаже в таблице <B><I>SALES</I></B> и в таблице 
<B><I>SKLAD</I></B> фиксируется уменьшение соответствующего товара. Если на складе нет 
необходимого количества товара, то выводится сообщение о недостатке товара и делается запись 
о продаже товара с наявным количеством товара на складе.
<LI>Создать представление, которое позволит подсчитать себестоимость каждого изделия из нашей базы данных.
   
 </OL>

</BODY></HTML>
